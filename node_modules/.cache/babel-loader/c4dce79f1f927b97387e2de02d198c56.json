{"ast":null,"code":"var _jsxFileName = \"/Users/neara/c/collab-demo/src/apps/UndoAwareBasic.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { capitaliseRandomLetter, deleteEverySecondLetter } from './helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UndoAwareBasicApp = () => {\n  _s();\n\n  const [text, setText] = useState(\"lorem ipsum dolor sit amet\");\n  const [textHistory, setTextHistory] = useState({\n    stack: [],\n    index: 0\n  });\n\n  const pushHistory = newState => {\n    setTextHistory(prev => {\n      const {\n        stack,\n        index\n      } = prev;\n      const newStack = stack.slice(0, index).concat([newState]);\n      return {\n        stack: newStack,\n        index: index + 1\n      };\n    });\n  };\n\n  const undo = () => {\n    const {\n      stack,\n      index\n    } = textHistory;\n\n    if (index > 0) {\n      setText(stack[index - 1]);\n      setTextHistory(prev => {\n        return { ...prev,\n          index: prev.index - 1\n        };\n      });\n    }\n  };\n\n  const redo = () => {\n    const {\n      stack,\n      index\n    } = textHistory;\n\n    if (index < stack.length) {\n      setText(stack[index + 1]);\n      setTextHistory(prev => {\n        return { ...prev,\n          index: prev.index + 1\n        };\n      });\n    }\n  };\n\n  const runCapitalise = () => {\n    const newText = capitaliseRandomLetter(text);\n    setText(newText);\n    pushHistory(newText);\n  };\n\n  const runDelete = () => {\n    const newText = deleteEverySecondLetter(text);\n    setText(newText);\n    pushHistory(newText);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Text: \", textState.text]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: runCapitalise,\n        children: \"Capitalise random letter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: runDelete,\n        children: \"Delete every second letter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: undo,\n        children: \"Undo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: redo,\n        children: \"Redo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Undo stack:\", /*#__PURE__*/_jsxDEV(\"pre\", {\n        children: JSON.stringify(textHistory, null, 4)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UndoAwareBasicApp, \"/iE2UsnoaI/i+hEeclp8JjqJW9w=\");\n\n_c = UndoAwareBasicApp;\nexport default UndoAwareBasicApp;\n\nvar _c;\n\n$RefreshReg$(_c, \"UndoAwareBasicApp\");","map":{"version":3,"names":["useState","capitaliseRandomLetter","deleteEverySecondLetter","UndoAwareBasicApp","text","setText","textHistory","setTextHistory","stack","index","pushHistory","newState","prev","newStack","slice","concat","undo","redo","length","runCapitalise","newText","runDelete","textState","JSON","stringify"],"sources":["/Users/neara/c/collab-demo/src/apps/UndoAwareBasic.js"],"sourcesContent":["import { useState } from 'react';\nimport { capitaliseRandomLetter, deleteEverySecondLetter } from './helpers';\n\nconst UndoAwareBasicApp = () => {\n    const [text, setText] = useState(\"lorem ipsum dolor sit amet\");\n    const [textHistory, setTextHistory] = useState({ stack: [], index: 0 });\n\n    const pushHistory = (newState) => {\n        setTextHistory(prev => {\n            const { stack, index } = prev;\n\n            const newStack = stack.slice(0, index).concat([newState]);\n\n            return { stack: newStack, index: index + 1 };\n        })\n    }\n\n    const undo = () => {\n        const { stack, index } = textHistory;\n\n        if (index > 0) {\n            setText(stack[index - 1]);\n\n            setTextHistory(prev => {\n                return { ...prev, index: prev.index - 1 };\n            });\n        }\n    }\n\n    const redo = () => {\n        const { stack, index } = textHistory;\n\n        if (index < stack.length) {\n            setText(stack[index + 1]);\n\n            setTextHistory(prev => {\n                return { ...prev, index: prev.index + 1 };\n            });\n        }\n    }\n\n    const runCapitalise = () => {\n        const newText = capitaliseRandomLetter(text);\n        setText(newText);\n        pushHistory(newText);\n    }\n\n    const runDelete = () => {\n        const newText = deleteEverySecondLetter(text);\n        setText(newText);\n        pushHistory(newText);\n    }\n\n    return (\n        <div>\n            <div>Text: {textState.text}</div>\n            <div>\n                <button onClick={runCapitalise}>Capitalise random letter</button>\n                <button onClick={runDelete}>Delete every second letter</button>\n            </div>\n            <div>\n                <button onClick={undo}>\n                    Undo\n                </button>\n                <button onClick={redo}>\n                    Redo\n                </button>\n            </div>\n            <div>Undo stack:\n                <pre>\n                    {JSON.stringify(textHistory, null, 4)}\n                </pre></div>\n        </div >\n    )\n}\n\nexport default UndoAwareBasicApp;\n"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,sBAAT,EAAiCC,uBAAjC,QAAgE,WAAhE;;;AAEA,MAAMC,iBAAiB,GAAG,MAAM;EAAA;;EAC5B,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBL,QAAQ,CAAC,4BAAD,CAAhC;EACA,MAAM,CAACM,WAAD,EAAcC,cAAd,IAAgCP,QAAQ,CAAC;IAAEQ,KAAK,EAAE,EAAT;IAAaC,KAAK,EAAE;EAApB,CAAD,CAA9C;;EAEA,MAAMC,WAAW,GAAIC,QAAD,IAAc;IAC9BJ,cAAc,CAACK,IAAI,IAAI;MACnB,MAAM;QAAEJ,KAAF;QAASC;MAAT,IAAmBG,IAAzB;MAEA,MAAMC,QAAQ,GAAGL,KAAK,CAACM,KAAN,CAAY,CAAZ,EAAeL,KAAf,EAAsBM,MAAtB,CAA6B,CAACJ,QAAD,CAA7B,CAAjB;MAEA,OAAO;QAAEH,KAAK,EAAEK,QAAT;QAAmBJ,KAAK,EAAEA,KAAK,GAAG;MAAlC,CAAP;IACH,CANa,CAAd;EAOH,CARD;;EAUA,MAAMO,IAAI,GAAG,MAAM;IACf,MAAM;MAAER,KAAF;MAASC;IAAT,IAAmBH,WAAzB;;IAEA,IAAIG,KAAK,GAAG,CAAZ,EAAe;MACXJ,OAAO,CAACG,KAAK,CAACC,KAAK,GAAG,CAAT,CAAN,CAAP;MAEAF,cAAc,CAACK,IAAI,IAAI;QACnB,OAAO,EAAE,GAAGA,IAAL;UAAWH,KAAK,EAAEG,IAAI,CAACH,KAAL,GAAa;QAA/B,CAAP;MACH,CAFa,CAAd;IAGH;EACJ,CAVD;;EAYA,MAAMQ,IAAI,GAAG,MAAM;IACf,MAAM;MAAET,KAAF;MAASC;IAAT,IAAmBH,WAAzB;;IAEA,IAAIG,KAAK,GAAGD,KAAK,CAACU,MAAlB,EAA0B;MACtBb,OAAO,CAACG,KAAK,CAACC,KAAK,GAAG,CAAT,CAAN,CAAP;MAEAF,cAAc,CAACK,IAAI,IAAI;QACnB,OAAO,EAAE,GAAGA,IAAL;UAAWH,KAAK,EAAEG,IAAI,CAACH,KAAL,GAAa;QAA/B,CAAP;MACH,CAFa,CAAd;IAGH;EACJ,CAVD;;EAYA,MAAMU,aAAa,GAAG,MAAM;IACxB,MAAMC,OAAO,GAAGnB,sBAAsB,CAACG,IAAD,CAAtC;IACAC,OAAO,CAACe,OAAD,CAAP;IACAV,WAAW,CAACU,OAAD,CAAX;EACH,CAJD;;EAMA,MAAMC,SAAS,GAAG,MAAM;IACpB,MAAMD,OAAO,GAAGlB,uBAAuB,CAACE,IAAD,CAAvC;IACAC,OAAO,CAACe,OAAD,CAAP;IACAV,WAAW,CAACU,OAAD,CAAX;EACH,CAJD;;EAMA,oBACI;IAAA,wBACI;MAAA,qBAAYE,SAAS,CAAClB,IAAtB;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ,eAEI;MAAA,wBACI;QAAQ,OAAO,EAAEe,aAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAQ,OAAO,EAAEE,SAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAFJ;IAAA;MAAA;MAAA;MAAA;IAAA,QAFJ,eAMI;MAAA,wBACI;QAAQ,OAAO,EAAEL,IAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ,eAII;QAAQ,OAAO,EAAEC,IAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAJJ;IAAA;MAAA;MAAA;MAAA;IAAA,QANJ,eAcI;MAAA,uCACI;QAAA,UACKM,IAAI,CAACC,SAAL,CAAelB,WAAf,EAA4B,IAA5B,EAAkC,CAAlC;MADL;QAAA;QAAA;QAAA;MAAA,QADJ;IAAA;MAAA;MAAA;MAAA;IAAA,QAdJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAqBH,CAvED;;GAAMH,iB;;KAAAA,iB;AAyEN,eAAeA,iBAAf"},"metadata":{},"sourceType":"module"}